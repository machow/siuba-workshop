<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.340">

  <title>siuba-workshop - Introduction to Siuba</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introduction to Siuba</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="resources" class="title-slide slide level1 center">
<h1>Resources</h1>
<ul>
<li><a href="https://machow.github.io/siuba-workshop/">Workshop homepage</a></li>
<li><a href="https://github.com/machow/siuba-workshop">Workshop repo (machow/siuba-workshop)</a></li>
<li><a href="https://machow.notion.site/PyData-NYC-workshop-live-notes-068483dc097043aab0c1b8f5eb630451">Live notes (Notion doc)</a></li>
<li><a href="https://siuba.org/">siuba docs</a></li>
<li><a href="https://plotnine.readthedocs.io/en/stable/">plotnine docs</a></li>
</ul>
</section>

<section id="introduction-to-siuba" class="title-slide slide level1 custom-title center">
<h1>Introduction to siuba</h1>
<aside class="notes">
<p>Hi, I’m Michael–the creator of siuba, a library for data analysis in Python.</p>
<p>In this course, you’ll use Python to explore and visualize data.</p>
<p>The course is designed for people who have never programmed before, and anyone interested in siuba!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="data-analysis" class="title-slide slide level1 center">
<h1>Data Analysis</h1>

<img data-src="model-workflow.png" class="r-stretch"><aside class="notes">
<p>Data analysis is the act of using data to produce effective communication. Communication that leads to meaningful action.</p>
<p>In this course, we’ll focus on one area of data analysis where siuba shines: transforming data.</p>
<p>We’ll also combine siuba with a library called plotnine to visualize data. Together, these libraries make a powerful combo.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="meet-the-data-spotify-top-200" class="title-slide slide level1 center">
<h1>Meet the data: Spotify top 200</h1>

<img data-src="spotify_site.png" class="r-stretch"><aside class="notes">
<p>We’ll use data that Spotify publishes every week on the 200 most streamed songs, in 62 different countries.</p>
<p>You can check it out on <a href="https://spotifycharts.com/regional/global/weekly/latest" target="_blank">spotifycharts.com</a></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="meet-the-data-spotify-top-200-1" class="title-slide slide level1 center">
<h1>Meet the data: Spotify top 200</h1>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>music_top200</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344382</td>
<td>202.887</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330011</td>
<td>249.520</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11771</td>
<td>193.090</td>
<td>Africa</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11752</td>
<td>217.347</td>
<td>Africa</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11743</td>
<td>197.217</td>
<td>Africa</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>The data we’ll use is held in a <strong>DataFrame</strong>. A DataFrame is a big table of data, made up of rows and columns. In the example below, the <strong>variable</strong> called <code>music_top200</code> lets us refer to and work on the data.</p>
<p>Notice that in the bottom-left of the table, it shows the number of rows and columns. This data has 12,000 rows and 6 columns.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="meet-the-data-spotify-top-200-2" class="slide level2">
<h2>Meet the data: Spotify top 200</h2>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>music_top200</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-tags="[&quot;hide-input&quot;]" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="3">


<style>
table.dataframe.slides-df__highlight1 tr:nth-child(2) {
    background-color: yellow;
}
</style>



<table class="dataframe slides-df__highlight1" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344382</td>
<td>202.887</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330011</td>
<td>249.520</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11771</td>
<td>193.090</td>
<td>Africa</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11752</td>
<td>217.347</td>
<td>Africa</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11743</td>
<td>197.217</td>
<td>Africa</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside class="notes">
<p>Every observation–or row–in the DataFrame is a track in the top 200 for a country.</p>
<p>For example, in the highlighted code is the track in position 2 (second most streamed) in Argentina. The track name is Tattoo, and has been streamed 1,344,382 times, and is 202 seconds long!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="meet-the-data-spotify-song-features" class="title-slide slide level1 center">
<h1>Meet the data: Spotify song features</h1>
<div style="width: 70%">
<p><img data-src="plot-weeknd-features.png"></p>
</div>
<aside class="notes">
<p>Later in the course, we’ll look at measures Spotify calculates for each song.</p>
<p>Their measures for a song include:</p>
<ul>
<li>energy</li>
<li>valence (how happy or positive)</li>
<li>danceability</li>
<li>speechiness</li>
<li>acousticness</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="data-analysis-1" class="title-slide slide level1 center">
<h1>Data Analysis</h1>
<div>
<style scoped="">
.container-00 {
    display: flex;
}
.col-00 {
    flex: 1;
    height: 450px;
}
.col-00 img {
    max-height: 50%;
}

.col-00 p {
  /* the markdown processor puts the img tags inside a <p> */
  display: block;
  height: 100%;
}
</p></style>
<div class="container-00" height="450px">
<div class="col-00" width="50%">
<p><img src="plot-line.png"> <img src="plot-hist.png"></p>
</div>
<div class="col-00" width="50%">
<p><img src="plot-point.png"> <img src="plot-box.png"></p>
</div>
</div>
</div>
<aside class="notes">
<p>The skills you’ll build doing transformation and visualization in this course will allow you to start analyzing your own data.</p>
<p>The course is interactive: between short lessons you’ll complete interactive exercises by typing your own code.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="how-code-is-structured" class="title-slide slide level1 center">
<h1>How code is structured</h1>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>(track_features</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"The Weeknd"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb3-4"><a href="#cb3-4"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb3-5"><a href="#cb3-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-6-output-1.png" class="r-stretch"><aside class="notes">
<p>Here’s an example of plotting the energy and valence of tracks by The Weeknd. Each point is a single track (for example, the song “Blinding Lights”).</p>
<p>The top line of the code is the data. Every additional line is an action applied to the data.</p>
<p><strong>Click down to see what each line of code does.</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-code-is-structured-1" class="slide level2">
<h2>How code is structured</h2>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>(track_features</span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"The Weeknd"</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a> </span>
<span id="cb4-5"><a href="#cb4-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">album</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">energy</th>
<th data-quarto-table-cell-role="th">valence</th>
<th data-quarto-table-cell-role="th">danceability</th>
<th data-quarto-table-cell-role="th">speechiness</th>
<th data-quarto-table-cell-role="th">acousticness</th>
<th data-quarto-table-cell-role="th">popularity</th>
<th data-quarto-table-cell-role="th">duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">568</td>
<td>The Weeknd</td>
<td>My Dear Melancholy,</td>
<td>Call Out My Name</td>
<td>0.593</td>
<td>0.175</td>
<td>0.461</td>
<td>0.0356</td>
<td>0.17000</td>
<td>82</td>
<td>228.373</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2753</td>
<td>The Weeknd</td>
<td>Blinding Lights</td>
<td>Blinding Lights</td>
<td>0.796</td>
<td>0.345</td>
<td>0.513</td>
<td>0.0629</td>
<td>0.00147</td>
<td>75</td>
<td>201.573</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3004</td>
<td>The Weeknd</td>
<td>In Your Eyes (Remix)</td>
<td>In Your Eyes (with Doja Cat) - Remix</td>
<td>0.731</td>
<td>0.727</td>
<td>0.679</td>
<td>0.0319</td>
<td>0.00518</td>
<td>81</td>
<td>237.912</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23966</td>
<td>The Weeknd</td>
<td>Beauty Behind The Madness</td>
<td>The Hills</td>
<td>0.564</td>
<td>0.137</td>
<td>0.585</td>
<td>0.0515</td>
<td>0.06710</td>
<td>83</td>
<td>242.253</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24688</td>
<td>The Weeknd</td>
<td>Starboy</td>
<td>Starboy</td>
<td>0.587</td>
<td>0.486</td>
<td>0.679</td>
<td>0.2760</td>
<td>0.14100</td>
<td>84</td>
<td>230.453</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24982</td>
<td>The Weeknd</td>
<td>After Hours</td>
<td>In Your Eyes</td>
<td>0.719</td>
<td>0.717</td>
<td>0.667</td>
<td>0.0346</td>
<td>0.00285</td>
<td>91</td>
<td>237.520</td>
</tr>
</tbody>
</table>

<p>23 rows × 10 columns</p>
</div>
</div>
<aside class="notes">
<p>The first action is filtering the data, to keep only observations (rows) where <code>artist</code> is The Weeknd.</p>
<p>Don’t worry to much about the details for now. Filter is the first thing you’ll learn, once you start the first chapter!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-code-is-structured-2" class="slide level2">
<h2>How code is structured</h2>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>(track_features</span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"The Weeknd"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb5-4"><a href="#cb5-4"></a> </span>
<span id="cb5-5"><a href="#cb5-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-8-output-1.png" class="r-stretch"><aside class="notes">
<p>The next action, <code>ggplot(...)</code>, gets ready to make a plot, based on the data in the previous step.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-code-is-structured-3" class="slide level2">
<h2>How code is structured</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>(track_features</span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"The Weeknd"</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb6-4"><a href="#cb6-4"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb6-5"><a href="#cb6-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-9-output-1.png" class="r-stretch"><aside class="notes">
<p>Finally, <code>geom_point()</code> adds points to the plot. Each point comes from a row of data.</p>
<p>So in this case each point is a track by The Weeknd.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="lets-practice" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="../help/setup.html">Workshop setup instructions</a></li>
</ul>
<aside class="notes">
<p>For the practice below, you’ll get to explore the two datasets by testing out different options.</p>
<p>This is to make sure you get the big picture, before we dive into the specifics of how each piece of code works!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-filter-verb" class="title-slide slide level1 custom-title center">
<h1>The filter verb</h1>
<aside class="notes">
<p>Now that you’ve seen some code in action on the music data, we’ll focus on writing your own code.</p>
<p>In this chapter, you’ll learn about the “verbs” in the siuba package. The first verb you’ll use is filter.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-filter-verb-1" class="title-slide slide level1 center">
<h1>The filter verb</h1>

<img data-src="model-filter.png" class="r-stretch"><aside class="notes">
<p>You use filter when you want to keep only a subset of your observations, based on a particular condition.</p>
<p>Filtering data is a common first step in an analysis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="filter-for-top-songs" class="title-slide slide level1 center">
<h1>Filter for top songs</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>(music_top200</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.position <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Every time you apply a verb, you’ll use a pipe. A pipe is a block of commands, surrounded by parentheses.</p>
<p>For example, let’s say we want to keep only songs in the first position on the music charts. This is done by using the pipe shown on the slide.</p>
<p><strong>Click the down arrow</strong> on the slideshow to see broken into 3 steps:</p>
<ol type="1">
<li>start the block</li>
<li>write the pipe operator and verb name</li>
<li>write the operation</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="filter-step-1-start-the-block" class="slide level2">
<h2>Filter step 1: start the block</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>(music_top200</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>A block is written with opening and closing parentheses, and the name of your data in the middle.</p>
<p>Press enter twice after the name of your data, to make an empty line.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="filter-step-2-pipe-operator-and-verb-name" class="slide level2">
<h2>Filter step 2: pipe operator and verb name</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>(music_top200</span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>()</span>
<span id="cb9-3"><a href="#cb9-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Next, write a pipe operator using two greater than signs. It says “take whatever is before the pipe operator, and feed it into the next step.”</p>
<p>In this case, the next step will be filter.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="filter-step-3-write-the-operation" class="slide level2">
<h2>Filter step 3: write the operation</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>(music_top200</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.position <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Finally, we can complete our first verb.</p>
<p>We have all 200 hit songs on the charts, but just want to get the first.</p>
<p>The “position equals equals 1” is the condition we are using to filter observations. The “equals equals” may be surprising: it’s what we call a “logical equals”- an operation to compare two values: each position, and the number 1.</p>
<p>A single equals here would mean something different in python, which you’ll see later.</p>
<p>Let’s see what this code outputs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="filter-for-top-songs-1" class="title-slide slide level1 center">
<h1>Filter for top songs</h1>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>(music_top200</span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.position <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">200</td>
<td>Austria</td>
<td>1</td>
<td>Blinding Lights</td>
<td>The Weeknd</td>
<td>229576</td>
<td>201.573</td>
<td>Europe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">400</td>
<td>Australia</td>
<td>1</td>
<td>Blinding Lights</td>
<td>The Weeknd</td>
<td>1757343</td>
<td>201.573</td>
<td>Oceania</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11800</td>
<td>Uruguay</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>120175</td>
<td>200.960</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12000</td>
<td>Viet Nam</td>
<td>1</td>
<td>Sweet Night</td>
<td>V</td>
<td>189261</td>
<td>214.259</td>
<td>Asia</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12200</td>
<td>South Africa</td>
<td>1</td>
<td>The Box</td>
<td>Roddy Ricch</td>
<td>94422</td>
<td>196.653</td>
<td>Africa</td>
</tr>
</tbody>
</table>

<p>62 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>Notice that now, we have only 62 rows: that’s how many countries are in the dataset.</p>
<p>It’s important to note that you’re not removing any rows from the original <code>music</code> data. You can still use the <code>music</code> object for other analyses, and it won’t be any different than it was before.</p>
<p>Instead, filter is returning a new dataset, one with fewer rows, that then gets printed to the screen.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="filter-for-country" class="title-slide slide level1 center">
<h1>Filter for country</h1>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>(music_top200</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7800</td>
<td>United States</td>
<td>1</td>
<td>The Box</td>
<td>Roddy Ricch</td>
<td>12987027</td>
<td>196.653</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7801</td>
<td>United States</td>
<td>2</td>
<td>Myron</td>
<td>Lil Uzi Vert</td>
<td>9163134</td>
<td>224.955</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7802</td>
<td>United States</td>
<td>3</td>
<td>Blueberry Faygo</td>
<td>Lil Mosey</td>
<td>8043475</td>
<td>162.547</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7997</td>
<td>United States</td>
<td>198</td>
<td>Lights Up</td>
<td>Harry Styles</td>
<td>1606234</td>
<td>172.227</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7998</td>
<td>United States</td>
<td>199</td>
<td>Without Me</td>
<td>Halsey</td>
<td>1606153</td>
<td>201.661</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7999</td>
<td>United States</td>
<td>200</td>
<td>Enemies (feat. DaBaby)</td>
<td>Post Malone</td>
<td>1597824</td>
<td>196.760</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>You could choose another condition to filter on, besides the position. For example, suppose we wanted to get only the observations from the United States.</p>
<p>We would write this as “filter country equals equals quote United States endquote”, resulting in only the 200 observations from that country.</p>
<p>The quotes around United States are important: otherwise Python won’t understand that the words “Hong” and “Kong” are the content of a text variable, as opposed to variable names. You didn’t need quotes around a number like 1, but you do around text.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="filter-with-two-variables" class="title-slide slide level1 center">
<h1>Filter with two variables</h1>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>(music_top200</span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.position <span class="op">==</span> <span class="dv">1</span>, _.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7800</td>
<td>United States</td>
<td>1</td>
<td>The Box</td>
<td>Roddy Ricch</td>
<td>12987027</td>
<td>196.653</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>1 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>We can specify multiple conditions in the filter.</p>
<p>Each of the conditions is separated by a comma: here we are saying we want only the one observation for position 1, comma, where the country is the United States.</p>
<p>Each of these equals equals expressions is called an argument. This kind of double filter is useful for extracting a single observation you’re interested in.</p>
<p>You’ll be able to practice this in the exercises.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-1" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="https://siuba.org/guide/verb-filter.html">siuba guide - filter</a></li>
<li><a href="https://siuba.org/api/filter.html">siuba api - filter</a></li>
</ul>
<aside class="notes">
<p>Scroll down to investigate the music data with filter.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-arrange-verb" class="title-slide slide level1 custom-title center">
<h1>The arrange verb</h1>
<aside class="notes">
<p>In the last video you learned the filter verb, for extracting a subset of your observations based on a condition.</p>
<p>Now you’ll learn the arrange verb.</p>
<p>Arrange sorts the observations in a dataset, in ascending or descending order based on one of its variables.</p>
<p>This is useful, for example, when you want to know the most extreme values in a dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-arrange-verb-1" class="title-slide slide level1 center">
<h1>The arrange verb</h1>

<img data-src="model-arrange.png" class="r-stretch"></section>

<section id="sorting-with-arrange" class="title-slide slide level1 center">
<h1>Sorting with arrange</h1>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>(music_top200</span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="op">&gt;&gt;</span> arrange(_.duration)</span>
<span id="cb14-3"><a href="#cb14-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10868</td>
<td>Slovakia</td>
<td>69</td>
<td>Klop Klop</td>
<td>Karlo</td>
<td>17222</td>
<td>65.631</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4586</td>
<td>Greece</td>
<td>187</td>
<td>FENDI</td>
<td>iLLEOo</td>
<td>16786</td>
<td>76.099</td>
<td>Europe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9937</td>
<td>Poland</td>
<td>138</td>
<td>Mistrz ping-ponga</td>
<td>PRO8L3M</td>
<td>145143</td>
<td>83.360</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">535</td>
<td>Australia</td>
<td>136</td>
<td>Innerbloom</td>
<td>RÜFÜS DU SOL</td>
<td>260092</td>
<td>578.041</td>
<td>Oceania</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1302</td>
<td>Brazil</td>
<td>103</td>
<td>Poesia Acústica #8: Amor e Samba</td>
<td>Pineapple StormTv</td>
<td>839192</td>
<td>614.615</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11557</td>
<td>Turkey</td>
<td>158</td>
<td>Susamam</td>
<td>Şanışer</td>
<td>194804</td>
<td>851.871</td>
<td>Asia</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>Just like filter, you use the arrange verb after the pipe operator.</p>
<p>You would type music, then the pipe operator (two greater than symbols) and then arrange. Within those parentheses, you tell it what column you want to arrange by.</p>
<p>The observations are now sorted in ascending order, with the lowest duration songs appearing first.</p>
<p>Look at the second to rightmost column: it starts with 65.631, the smallest value in the dataset, then keeps increasing. Looking at the track name column, this track is called Klop Klop, and is the shortest track in the data.</p>
<p>Just like with filter, the music object itself is unchanged: arrange is just giving you a new, sorted dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="arrange-descending" class="title-slide slide level1 center">
<h1>arrange descending</h1>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>(music_top200</span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb15-3"><a href="#cb15-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11557</td>
<td>Turkey</td>
<td>158</td>
<td>Susamam</td>
<td>Şanışer</td>
<td>194804</td>
<td>851.871</td>
<td>Asia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1302</td>
<td>Brazil</td>
<td>103</td>
<td>Poesia Acústica #8: Amor e Samba</td>
<td>Pineapple StormTv</td>
<td>839192</td>
<td>614.615</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">535</td>
<td>Australia</td>
<td>136</td>
<td>Innerbloom</td>
<td>RÜFÜS DU SOL</td>
<td>260092</td>
<td>578.041</td>
<td>Oceania</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9937</td>
<td>Poland</td>
<td>138</td>
<td>Mistrz ping-ponga</td>
<td>PRO8L3M</td>
<td>145143</td>
<td>83.360</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4586</td>
<td>Greece</td>
<td>187</td>
<td>FENDI</td>
<td>iLLEOo</td>
<td>16786</td>
<td>76.099</td>
<td>Europe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10868</td>
<td>Slovakia</td>
<td>69</td>
<td>Klop Klop</td>
<td>Karlo</td>
<td>17222</td>
<td>65.631</td>
<td>Europe</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>arrange also lets you sort in <strong>descending order</strong>. To do that, you’d put a <strong>negative sign</strong> next to the variable you’re sorting by.</p>
<p>This lets us see that the track with the longest duration is Susamam, which is a hit in at least Turkey. It’s almost 15 minutes long!</p>
<p>However, we might be interested in looking at duration within a specific country.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="arrange-and-filter" class="title-slide slide level1 center">
<h1>arrange and filter</h1>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>(music_top200</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb16-4"><a href="#cb16-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>Suppose you wanted to find the longest duration song in the United States.</p>
<p>To do that, you can combine the two verbs you’ve already learned: filter, and arrange.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="arrange-and-filter-1" class="slide level2">
<h2>arrange and filter</h2>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>(music_top200</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7800</td>
<td>United States</td>
<td>1</td>
<td>The Box</td>
<td>Roddy Ricch</td>
<td>12987027</td>
<td>196.653</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7801</td>
<td>United States</td>
<td>2</td>
<td>Myron</td>
<td>Lil Uzi Vert</td>
<td>9163134</td>
<td>224.955</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7802</td>
<td>United States</td>
<td>3</td>
<td>Blueberry Faygo</td>
<td>Lil Mosey</td>
<td>8043475</td>
<td>162.547</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7997</td>
<td>United States</td>
<td>198</td>
<td>Lights Up</td>
<td>Harry Styles</td>
<td>1606234</td>
<td>172.227</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7998</td>
<td>United States</td>
<td>199</td>
<td>Without Me</td>
<td>Halsey</td>
<td>1606153</td>
<td>201.661</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7999</td>
<td>United States</td>
<td>200</td>
<td>Enemies (feat. DaBaby)</td>
<td>Post Malone</td>
<td>1597824</td>
<td>196.760</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p><strong>Longest duration song in the United States.</strong></p>
<p>You start with the music dataset, then a pipe to give the dataset to filter. Then you specify that you want to filter for country equals equals United States.</p>
<p>Then you use another pipe step.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="arrange-and-filter-2" class="slide level2">
<h2>arrange and filter</h2>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>(music_top200</span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb18-4"><a href="#cb18-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p><strong>Longest duration song in the United States.</strong></p>
<p>The added pipe line takes the result of the filter, and gives it to arrange. You specify that you want to sort in descending order of duration.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="arrange-and-filter-3" class="title-slide slide level1 center">
<h1>arrange and filter</h1>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>(music_top200</span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb19-4"><a href="#cb19-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>The result shows that the longest duration track in the United States is After Hours by The Weeknd.</p>
<p>We can explore many such questions with various combinations of dplyr verbs.</p>
<p>Over the course of these lessons, you’ll learn to pipe together multiple simple operations to create a rich and informative data analysis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-2" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="https://siuba.org/guide/verb-arrange.html">siuba guide - arrange</a></li>
<li><a href="https://siuba.org/api/arrange.html">siuba api - arrange</a></li>
</ul>
</section>

<section id="the-arrange-verb-2" class="title-slide slide level1 custom-title center">
<h1>The arrange verb</h1>
<aside class="notes">
<p>In the last video you learned the filter verb, for extracting a subset of your observations based on a condition.</p>
<p>Now you’ll learn the arrange verb.</p>
<p>Arrange sorts the observations in a dataset, in ascending or descending order based on one of its variables.</p>
<p>This is useful, for example, when you want to know the most extreme values in a dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-arrange-verb-3" class="title-slide slide level1 center">
<h1>The arrange verb</h1>

<img data-src="model-arrange.png" class="r-stretch"></section>

<section id="sorting-with-arrange-1" class="title-slide slide level1 center">
<h1>Sorting with arrange</h1>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>(music_top200</span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="op">&gt;&gt;</span> arrange(_.duration)</span>
<span id="cb20-3"><a href="#cb20-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10868</td>
<td>Slovakia</td>
<td>69</td>
<td>Klop Klop</td>
<td>Karlo</td>
<td>17222</td>
<td>65.631</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4586</td>
<td>Greece</td>
<td>187</td>
<td>FENDI</td>
<td>iLLEOo</td>
<td>16786</td>
<td>76.099</td>
<td>Europe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9937</td>
<td>Poland</td>
<td>138</td>
<td>Mistrz ping-ponga</td>
<td>PRO8L3M</td>
<td>145143</td>
<td>83.360</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">535</td>
<td>Australia</td>
<td>136</td>
<td>Innerbloom</td>
<td>RÜFÜS DU SOL</td>
<td>260092</td>
<td>578.041</td>
<td>Oceania</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1302</td>
<td>Brazil</td>
<td>103</td>
<td>Poesia Acústica #8: Amor e Samba</td>
<td>Pineapple StormTv</td>
<td>839192</td>
<td>614.615</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11557</td>
<td>Turkey</td>
<td>158</td>
<td>Susamam</td>
<td>Şanışer</td>
<td>194804</td>
<td>851.871</td>
<td>Asia</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>Just like filter, you use the arrange verb after the pipe operator.</p>
<p>You would type music, then the pipe operator (two greater than symbols) and then arrange. Within those parentheses, you tell it what column you want to arrange by.</p>
<p>The observations are now sorted in ascending order, with the lowest duration songs appearing first.</p>
<p>Look at the second to rightmost column: it starts with 65.631, the smallest value in the dataset, then keeps increasing. Looking at the track name column, this track is called Klop Klop, and is the shortest track in the data.</p>
<p>Just like with filter, the music object itself is unchanged: arrange is just giving you a new, sorted dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="arrange-descending-1" class="title-slide slide level1 center">
<h1>arrange descending</h1>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>(music_top200</span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb21-3"><a href="#cb21-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11557</td>
<td>Turkey</td>
<td>158</td>
<td>Susamam</td>
<td>Şanışer</td>
<td>194804</td>
<td>851.871</td>
<td>Asia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1302</td>
<td>Brazil</td>
<td>103</td>
<td>Poesia Acústica #8: Amor e Samba</td>
<td>Pineapple StormTv</td>
<td>839192</td>
<td>614.615</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">535</td>
<td>Australia</td>
<td>136</td>
<td>Innerbloom</td>
<td>RÜFÜS DU SOL</td>
<td>260092</td>
<td>578.041</td>
<td>Oceania</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9937</td>
<td>Poland</td>
<td>138</td>
<td>Mistrz ping-ponga</td>
<td>PRO8L3M</td>
<td>145143</td>
<td>83.360</td>
<td>Europe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4586</td>
<td>Greece</td>
<td>187</td>
<td>FENDI</td>
<td>iLLEOo</td>
<td>16786</td>
<td>76.099</td>
<td>Europe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10868</td>
<td>Slovakia</td>
<td>69</td>
<td>Klop Klop</td>
<td>Karlo</td>
<td>17222</td>
<td>65.631</td>
<td>Europe</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>arrange also lets you sort in <strong>descending order</strong>. To do that, you’d put a <strong>negative sign</strong> next to the variable you’re sorting by.</p>
<p>This lets us see that the track with the longest duration is Susamam, which is a hit in at least Turkey. It’s almost 15 minutes long!</p>
<p>However, we might be interested in looking at duration within a specific country.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="arrange-and-filter-4" class="title-slide slide level1 center">
<h1>arrange and filter</h1>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>(music_top200</span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb22-4"><a href="#cb22-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>Suppose you wanted to find the longest duration song in the United States.</p>
<p>To do that, you can combine the two verbs you’ve already learned: filter, and arrange.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="arrange-and-filter-5" class="slide level2">
<h2>arrange and filter</h2>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>(music_top200</span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7800</td>
<td>United States</td>
<td>1</td>
<td>The Box</td>
<td>Roddy Ricch</td>
<td>12987027</td>
<td>196.653</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7801</td>
<td>United States</td>
<td>2</td>
<td>Myron</td>
<td>Lil Uzi Vert</td>
<td>9163134</td>
<td>224.955</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7802</td>
<td>United States</td>
<td>3</td>
<td>Blueberry Faygo</td>
<td>Lil Mosey</td>
<td>8043475</td>
<td>162.547</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7997</td>
<td>United States</td>
<td>198</td>
<td>Lights Up</td>
<td>Harry Styles</td>
<td>1606234</td>
<td>172.227</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7998</td>
<td>United States</td>
<td>199</td>
<td>Without Me</td>
<td>Halsey</td>
<td>1606153</td>
<td>201.661</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7999</td>
<td>United States</td>
<td>200</td>
<td>Enemies (feat. DaBaby)</td>
<td>Post Malone</td>
<td>1597824</td>
<td>196.760</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p><strong>Longest duration song in the United States.</strong></p>
<p>You start with the music dataset, then a pipe to give the dataset to filter. Then you specify that you want to filter for country equals equals United States.</p>
<p>Then you use another pipe step.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="arrange-and-filter-6" class="slide level2">
<h2>arrange and filter</h2>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>(music_top200</span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb24-4"><a href="#cb24-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p><strong>Longest duration song in the United States.</strong></p>
<p>The added pipe line takes the result of the filter, and gives it to arrange. You specify that you want to sort in descending order of duration.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="arrange-and-filter-7" class="title-slide slide level1 center">
<h1>arrange and filter</h1>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a>(music_top200</span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"United States"</span>)</span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.duration)</span>
<span id="cb25-4"><a href="#cb25-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7841</td>
<td>United States</td>
<td>42</td>
<td>After Hours</td>
<td>The Weeknd</td>
<td>3672033</td>
<td>361.027</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7915</td>
<td>United States</td>
<td>116</td>
<td>Life Is Good (feat. Drake, DaBaby &amp; Lil Baby) - Remix</td>
<td>Future</td>
<td>2181930</td>
<td>315.346</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7923</td>
<td>United States</td>
<td>124</td>
<td>SICKO MODE</td>
<td>Travis Scott</td>
<td>2085268</td>
<td>312.820</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7832</td>
<td>United States</td>
<td>33</td>
<td>Strawberry Peels (feat. Young Thug &amp; Gunna)</td>
<td>Lil Uzi Vert</td>
<td>4007781</td>
<td>115.350</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7853</td>
<td>United States</td>
<td>54</td>
<td>CITY OF ANGELS</td>
<td>24kGoldn</td>
<td>3443366</td>
<td>112.493</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7971</td>
<td>United States</td>
<td>172</td>
<td>Skechers</td>
<td>DripReport</td>
<td>1731265</td>
<td>106.000</td>
<td>Americas</td>
</tr>
</tbody>
</table>

<p>200 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>The result shows that the longest duration track in the United States is After Hours by The Weeknd.</p>
<p>We can explore many such questions with various combinations of dplyr verbs.</p>
<p>Over the course of these lessons, you’ll learn to pipe together multiple simple operations to create a rich and informative data analysis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-3" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="https://siuba.org/guide/verb-arrange.html">siuba guide - arrange</a></li>
<li><a href="https://siuba.org/api/arrange.html">siuba api - arrange</a></li>
</ul>
</section>

<section id="the-mutate-verb" class="title-slide slide level1 custom-title center">
<h1>The mutate verb</h1>
<aside class="notes">
<p>You’ve already learned two verbs for manipulating data: filter for extracting a subset of the observations, and arrange for sorting them.</p>
<p>Suppose you want to change one of the variables in your dataset, based on the other ones. Or suppose you want to add a new variable.</p>
<p>For that, you would use the mutate verb.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-mutate-verb-1" class="title-slide slide level1 center">
<h1>The mutate verb</h1>

<img data-src="model-mutate.png" class="r-stretch"></section>

<section>
<section id="using-mutate-to-change-a-variable" class="title-slide slide level1 center">
<h1>Using mutate to change a variable</h1>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a>(music_top200</span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="op">&gt;&gt;</span> mutate(streams <span class="op">=</span> _.streams <span class="op">/</span> <span class="dv">1000</span>)</span>
<span id="cb26-3"><a href="#cb26-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>First you’ll learn how to change an existing variable.</p>
<p>You use mutate like you would filter or arrange, after a pipe operator.</p>
<p>Inside this mutate statement, what’s on the right of the equals sign is what’s being calculated, and what’s on the left is what’s being replaced. Here, you’re calculating streams slash one thousand.</p>
<p><strong>(Click the down arrow for a breakdown)</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="using-mutate-to-change-a-variable-1" class="slide level2">
<h2>Using mutate to change a variable</h2>
<pre><code class="language-python">(music_top200
  &gt;&gt; mutate(streams = <mark>_.streams / 1000</mark>)
)
</code></pre>
<aside class="notes">
<p>The slash in Python performs division, so “streams divided by one thousand”.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="using-mutate-to-change-a-variable-2" class="slide level2">
<h2>Using mutate to change a variable</h2>
<pre><code class="language-python">(music_top200
  &gt;&gt; mutate(<mark>streams =</mark> _.streams / 1000)
)
</code></pre>
<aside class="notes">
<p>On the left, you’re saying you want to replace the existing streams column, by writing streams equals.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="using-mutate-to-change-a-variable-result" class="title-slide slide level1 center">
<h1>Using mutate to change a variable (result)</h1>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>(music_top200</span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="op">&gt;&gt;</span> mutate(streams <span class="op">=</span> _.streams <span class="op">/</span> <span class="dv">1000</span>)</span>
<span id="cb27-3"><a href="#cb27-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858.666</td>
<td>200.960</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344.382</td>
<td>202.887</td>
<td>Americas</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330.011</td>
<td>249.520</td>
<td>Americas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11.771</td>
<td>193.090</td>
<td>Africa</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11.752</td>
<td>217.347</td>
<td>Africa</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11.743</td>
<td>197.217</td>
<td>Africa</td>
</tr>
</tbody>
</table>

<p>12400 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>The result is the same table, but with streams replaced with a new value, one that’s much smaller than it was before.</p>
<p>This is how you manipulate existing variables in the table. That’s often necessary during data processing and cleaning.</p>
<p>Just like filter and arrange, you’re not altering the original music_top200 data, you’re just changing the value in this new data frame that’s being returned.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-mutate-to-add-a-new-variable" class="title-slide slide level1 center">
<h1>Using mutate to add a new variable</h1>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a>(music_top200</span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb28-3"><a href="#cb28-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
<td>3.735175e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344382</td>
<td>202.887</td>
<td>Americas</td>
<td>2.727576e+08</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330011</td>
<td>249.520</td>
<td>Americas</td>
<td>3.318643e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11771</td>
<td>193.090</td>
<td>Africa</td>
<td>2.272862e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11752</td>
<td>217.347</td>
<td>Africa</td>
<td>2.554262e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11743</td>
<td>197.217</td>
<td>Africa</td>
<td>2.315919e+06</td>
</tr>
</tbody>
</table>

<p>12400 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>Alternatively, you may want to add a new variable.</p>
<p>For instance, suppose you want to know the total seconds people have listened to a track.</p>
<p>In the data you have a tracks duration in seconds, and its number of streams. This means <strong>total time listened is duration multiplied by streams</strong>.</p>
<p>You would use mutate in almost the same way. You pipe your music data to the mutate verb.</p>
<p>The asterisk in Python represents multiplication, so you write streams asterisk duration to multiply the two columns.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-mutate-to-add-a-new-variable-result" class="title-slide slide level1 center">
<h1>Using mutate to add a new variable (result)</h1>
<pre><code class="language-python">(music_top200
  &gt;&gt; mutate(<mark>ttl_stream_time</mark> = _.streams * _.duration)
)
</code></pre>
<div class="cell" data-tags="[&quot;hide-input&quot;]" data-execution_count="30">
<div class="cell-output cell-output-display" data-execution_count="29">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
<td>3.735175e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344382</td>
<td>202.887</td>
<td>Americas</td>
<td>2.727576e+08</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330011</td>
<td>249.520</td>
<td>Americas</td>
<td>3.318643e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11771</td>
<td>193.090</td>
<td>Africa</td>
<td>2.272862e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11752</td>
<td>217.347</td>
<td>Africa</td>
<td>2.554262e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11743</td>
<td>197.217</td>
<td>Africa</td>
<td>2.315919e+06</td>
</tr>
</tbody>
</table>

<p>12400 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>Notice that to be informative, we have named the column <code>ttl_stream_time</code>, that’s what’s to the left of the equals sign in our code.</p>
<p>Column names need to be one word like this: you can’t use spaces.</p>
<p>Notice that in the results, there’s a brand new <code>ttl_stream_time</code> column, which is much larger than <code>streams</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="answering-a-question" class="title-slide slide level1 center">
<h1>Answering a question</h1>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a>(music_top200</span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Costa Rica"</span>)</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.ttl_stream_time)</span>
<span id="cb29-5"><a href="#cb29-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Let’s put together the three verbs you learned in this chapter to answer a question about our data.</p>
<p>Suppose we wanted to know for a country, like Costa Rica, what songs were listened to longest.</p>
<p>We would do this in three steps:</p>
<ul>
<li>create the column</li>
<li>filter for country</li>
<li>then sort</li>
</ul>
<p><strong>(Click the down arrow for a breakdown)</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="answering-a-question-1" class="slide level2">
<h2>Answering a question</h2>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a>(music_top200</span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb30-3"><a href="#cb30-3"></a> </span>
<span id="cb30-4"><a href="#cb30-4"></a> </span>
<span id="cb30-5"><a href="#cb30-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>1</td>
<td>Tusa</td>
<td>KAROL G</td>
<td>1858666</td>
<td>200.960</td>
<td>Americas</td>
<td>3.735175e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Argentina</td>
<td>2</td>
<td>Tattoo</td>
<td>Rauw Alejandro</td>
<td>1344382</td>
<td>202.887</td>
<td>Americas</td>
<td>2.727576e+08</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Argentina</td>
<td>3</td>
<td>Hola - Remix</td>
<td>Dalex</td>
<td>1330011</td>
<td>249.520</td>
<td>Americas</td>
<td>3.318643e+08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12397</td>
<td>South Africa</td>
<td>198</td>
<td>Black And White</td>
<td>Niall Horan</td>
<td>11771</td>
<td>193.090</td>
<td>Africa</td>
<td>2.272862e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12398</td>
<td>South Africa</td>
<td>199</td>
<td>When I See U</td>
<td>Fantasia</td>
<td>11752</td>
<td>217.347</td>
<td>Africa</td>
<td>2.554262e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12399</td>
<td>South Africa</td>
<td>200</td>
<td>Psycho!</td>
<td>MASN</td>
<td>11743</td>
<td>197.217</td>
<td>Africa</td>
<td>2.315919e+06</td>
</tr>
</tbody>
</table>

<p>12400 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>We use mutate to create the ttl_stream_time column.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="answering-a-question-2" class="slide level2">
<h2>Answering a question</h2>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a>(music_top200</span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Costa Rica"</span>)</span>
<span id="cb31-4"><a href="#cb31-4"></a> </span>
<span id="cb31-5"><a href="#cb31-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2200</td>
<td>Costa Rica</td>
<td>1</td>
<td>Safaera</td>
<td>Bad Bunny</td>
<td>338078</td>
<td>295.177</td>
<td>Americas</td>
<td>9.979285e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2201</td>
<td>Costa Rica</td>
<td>2</td>
<td>Si Veo a Tu Mamá</td>
<td>Bad Bunny</td>
<td>244932</td>
<td>170.972</td>
<td>Americas</td>
<td>4.187651e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2202</td>
<td>Costa Rica</td>
<td>3</td>
<td>Ignorantes</td>
<td>Bad Bunny</td>
<td>233113</td>
<td>210.607</td>
<td>Americas</td>
<td>4.909523e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2397</td>
<td>Costa Rica</td>
<td>198</td>
<td>Ride It</td>
<td>Regard</td>
<td>21731</td>
<td>157.606</td>
<td>Americas</td>
<td>3.424936e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2398</td>
<td>Costa Rica</td>
<td>199</td>
<td>Sola</td>
<td>Manuel Turizo</td>
<td>21704</td>
<td>195.044</td>
<td>Americas</td>
<td>4.233235e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2399</td>
<td>Costa Rica</td>
<td>200</td>
<td>Nena Maldición (feat. Lenny Tavárez)</td>
<td>Paulo Londra</td>
<td>21684</td>
<td>228.875</td>
<td>Americas</td>
<td>4.962926e+06</td>
</tr>
</tbody>
</table>

<p>200 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>Then we’d use filter to restrict our analysis to only Costa Rica.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="answering-a-question-3" class="slide level2">
<h2>Answering a question</h2>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>(music_top200</span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Costa Rica"</span>) </span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.ttl_stream_time) </span>
<span id="cb32-5"><a href="#cb32-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2200</td>
<td>Costa Rica</td>
<td>1</td>
<td>Safaera</td>
<td>Bad Bunny</td>
<td>338078</td>
<td>295.177</td>
<td>Americas</td>
<td>9.979285e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2202</td>
<td>Costa Rica</td>
<td>3</td>
<td>Ignorantes</td>
<td>Bad Bunny</td>
<td>233113</td>
<td>210.607</td>
<td>Americas</td>
<td>4.909523e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2222</td>
<td>Costa Rica</td>
<td>23</td>
<td>René</td>
<td>Residente</td>
<td>101872</td>
<td>457.592</td>
<td>Americas</td>
<td>4.661581e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2377</td>
<td>Costa Rica</td>
<td>178</td>
<td>Dónde Estás</td>
<td>KHEA</td>
<td>23177</td>
<td>153.560</td>
<td>Americas</td>
<td>3.559060e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2394</td>
<td>Costa Rica</td>
<td>195</td>
<td>Blueberry Faygo</td>
<td>Lil Mosey</td>
<td>21771</td>
<td>162.547</td>
<td>Americas</td>
<td>3.538811e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2397</td>
<td>Costa Rica</td>
<td>198</td>
<td>Ride It</td>
<td>Regard</td>
<td>21731</td>
<td>157.606</td>
<td>Americas</td>
<td>3.424936e+06</td>
</tr>
</tbody>
</table>

<p>200 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>Then we’d use arrange to sort the data in descending order of our new ttl_stream_time variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="answering-a-question-result" class="title-slide slide level1 center">
<h1>Answering a question (result)</h1>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a>(music_top200</span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="op">&gt;&gt;</span> mutate(ttl_stream_time <span class="op">=</span> _.streams <span class="op">*</span> _.duration)</span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Costa Rica"</span>) </span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="op">&gt;&gt;</span> arrange(<span class="op">-</span>_.ttl_stream_time) </span>
<span id="cb33-5"><a href="#cb33-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">ttl_stream_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2200</td>
<td>Costa Rica</td>
<td>1</td>
<td>Safaera</td>
<td>Bad Bunny</td>
<td>338078</td>
<td>295.177</td>
<td>Americas</td>
<td>9.979285e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2202</td>
<td>Costa Rica</td>
<td>3</td>
<td>Ignorantes</td>
<td>Bad Bunny</td>
<td>233113</td>
<td>210.607</td>
<td>Americas</td>
<td>4.909523e+07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2222</td>
<td>Costa Rica</td>
<td>23</td>
<td>René</td>
<td>Residente</td>
<td>101872</td>
<td>457.592</td>
<td>Americas</td>
<td>4.661581e+07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2377</td>
<td>Costa Rica</td>
<td>178</td>
<td>Dónde Estás</td>
<td>KHEA</td>
<td>23177</td>
<td>153.560</td>
<td>Americas</td>
<td>3.559060e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2394</td>
<td>Costa Rica</td>
<td>195</td>
<td>Blueberry Faygo</td>
<td>Lil Mosey</td>
<td>21771</td>
<td>162.547</td>
<td>Americas</td>
<td>3.538811e+06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2397</td>
<td>Costa Rica</td>
<td>198</td>
<td>Ride It</td>
<td>Regard</td>
<td>21731</td>
<td>157.606</td>
<td>Americas</td>
<td>3.424936e+06</td>
</tr>
</tbody>
</table>

<p>200 rows × 8 columns</p>
</div>
</div>
<aside class="notes">
<p>This gives us the answer we’re looking for.</p>
<p>The most streamed track in Costa Rica is still the first in our result.</p>
<p>However, it looks like the track normally in the 23rd position–René by Residente–is third, since it’s over 7 minutes long!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-4" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="https://siuba.org/guide/verb-mutate.html">siuba guide - mutate</a></li>
<li><a href="https://siuba.org/api/mutate.html">siuba api - mutate</a></li>
</ul>
</section>

<section id="visualization-with-plotnine" class="title-slide slide level1 custom-title center">
<h1>Visualization with plotnine</h1>
<aside class="notes">
<p>In the last chapter, you used siuba to answer some questions about the music_top200 dataset.</p>
<p>You’ve been able to..</p>
<ul>
<li>filter for particular observations.</li>
<li>arrange to find the highest or lowest values.</li>
<li>mutate to add new columns.</li>
</ul>
<p>However, most of the code so far has only printed out results as a table. Often a better way to understand and present this kind of data is as a graph.</p>
<p>In this chapter, you’ll learn the essential skill of data visualization using the plotnine package.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="visualizing-with-plotnine" class="title-slide slide level1 center">
<h1>Visualizing with plotnine</h1>

<img data-src="all-slides_files/figure-revealjs/cell-37-output-1.png" class="r-stretch"><aside class="notes">
<p>In particular, this chapter will show you how to create scatterplots, like the one you see here.</p>
<p>Scatterplots compare two variables on an x- and y- axis.</p>
<p>Visualization and data wrangling are often intertwined, so you’ll see how the siuba and plotnine packages work closely together to create informative graphs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="importing-plotnine" class="title-slide slide level1 center">
<h1>Importing plotnine</h1>
<pre><code class="language-python">
from siuba import *
from plotnine import *
</code></pre>
<aside class="notes">
<p>You’ll be creating plots using the plotnine package.</p>
<p>Just like the siuba package, you’ll have to load it with <code>import</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="variables" class="title-slide slide level1 center">
<h1>Variables</h1>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>billie <span class="op">=</span> (</span>
<span id="cb34-2"><a href="#cb34-2"></a>  track_features</span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"Billie Eilish"</span>)</span>
<span id="cb34-4"><a href="#cb34-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>In this chapter, you’ll sometimes be visualizing subsets of the <code>track_features</code> data. For example, this code gets only tracks by the artist Billie Eilish.</p>
<p>When you’re working with just that subset, sometimes it’s useful to save the filtered data, as a new data frame.</p>
<p>To do this, you use the assignment operator.</p>
<p><strong>Click down for a breakdown of assignment</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="variables-1" class="slide level2">
<h2>Variables</h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a>(</span>
<span id="cb35-2"><a href="#cb35-2"></a>  track_features</span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.artist <span class="op">==</span> <span class="st">"Billie Eilish"</span>)</span>
<span id="cb35-4"><a href="#cb35-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>First, write out the pipe with the filter verb.</p>
<p>This is the same as you did in the previous chapter.</p>
<p>Note that whether the name of the data, <code>track_features</code> is right after the <code>(</code> or on its own line, the code works the same.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="variables-2" class="slide level2">
<h2>Variables</h2>
<pre><code class="language-python">
<mark>billie = </mark>(
  track_features
  &gt;&gt; filter(_.artist == "Billie Eilish")
)
</code></pre>
<aside class="notes">
<p>Then, write the variable name, followed by the variable operator (an equal sign).</p>
<p>In this case, the variable name is <code>billie</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="variables-result" class="title-slide slide level1 center">
<h1>Variables (result)</h1>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a>billie</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="38">
<div class="cell-output cell-output-display">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">album</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">energy</th>
<th data-quarto-table-cell-role="th">valence</th>
<th data-quarto-table-cell-role="th">danceability</th>
<th data-quarto-table-cell-role="th">speechiness</th>
<th data-quarto-table-cell-role="th">acousticness</th>
<th data-quarto-table-cell-role="th">popularity</th>
<th data-quarto-table-cell-role="th">duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1273</td>
<td>Billie Eilish</td>
<td>dont smile ...</td>
<td>my boy</td>
<td>0.3940</td>
<td>0.3240</td>
<td>0.692</td>
<td>0.2070</td>
<td>0.472</td>
<td>44</td>
<td>170.852</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2899</td>
<td>Billie Eilish</td>
<td>WHEN WE ALL...</td>
<td>listen befo...</td>
<td>0.0561</td>
<td>0.0820</td>
<td>0.319</td>
<td>0.0450</td>
<td>0.935</td>
<td>79</td>
<td>242.652</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2950</td>
<td>Billie Eilish</td>
<td>lovely (wit...</td>
<td>lovely (wit...</td>
<td>0.2960</td>
<td>0.1200</td>
<td>0.351</td>
<td>0.0333</td>
<td>0.934</td>
<td>89</td>
<td>200.186</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24857</td>
<td>Billie Eilish</td>
<td>WHEN WE ALL...</td>
<td>ilomilo</td>
<td>0.4230</td>
<td>0.5720</td>
<td>0.855</td>
<td>0.0585</td>
<td>0.724</td>
<td>79</td>
<td>156.371</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24997</td>
<td>Billie Eilish</td>
<td>WHEN I WAS ...</td>
<td>WHEN I WAS ...</td>
<td>0.3320</td>
<td>0.0628</td>
<td>0.696</td>
<td>0.0425</td>
<td>0.853</td>
<td>71</td>
<td>270.520</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25147</td>
<td>Billie Eilish</td>
<td>come out an...</td>
<td>come out an...</td>
<td>0.3210</td>
<td>0.1770</td>
<td>0.640</td>
<td>0.0931</td>
<td>0.693</td>
<td>74</td>
<td>210.376</td>
</tr>
</tbody>
</table>

<p>27 rows × 10 columns</p>
</div>
</div>
</div>
<aside class="notes">
<p>Now if you print the <code>billie</code> dataset, we can see that it’s another table.</p>
<p>But this one has only 27 rows: one for each track by Billie Eilish in the original data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="visualizing-with-plotnine-1" class="title-slide slide level1 center">
<h1>Visualizing with plotnine</h1>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>(billie</span>
<span id="cb37-2"><a href="#cb37-2"></a> <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="op">+</span> geom_point()</span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="op">+</span> labs(title <span class="op">=</span> <span class="st">"Billie Eilish hit track features"</span>)</span>
<span id="cb37-5"><a href="#cb37-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-40-output-1.png" class="r-stretch"><aside class="notes">
<p>Suppose you want to examine the energy and valence of Billie Eilish’s songs.</p>
<p>You could do this with a scatterplot comparing two variables in our track_features dataset: energy on the x-axis and valence on the y-axis.</p>
<p>There are three parts to a plotnine graph.</p>
<p><strong>(Click the down button to see a breakdown of the code)</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualizing-with-plotnine-2" class="slide level2">
<h2>Visualizing with plotnine</h2>
<pre><code class="language-python">(<mark>billie</mark>
 &gt;&gt; ggplot(aes("energy", "valence"))
  + geom_point()
  + labs(title = "Billie Eilish hit track features")  
)
</code></pre>
<aside class="notes">
<p>First is the data that we’re visualizing. In this case, that is the <code>billie</code> variable you just created.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualizing-with-plotnine-3" class="slide level2">
<h2>Visualizing with plotnine</h2>
<pre><code class="language-python">(billie
 &gt;&gt; ggplot(<mark>aes("energy", "valence")</mark>)
  + geom_point()
  + labs(title = "Billie Eilish hit track features")
)
</code></pre>
<aside class="notes">
<p>Second is the mapping of variables in your dataset to aesthetics in your graph.</p>
<p>An aesthetic is a visual dimension of a graph that can be used to communicate information.</p>
<p>In a scatterplot, your two dimensions are the x axis and the y axis, so you write aes (for “aesthetic”), parentheses, x equals gdpPerCap, y = lifeExp, telling it which variables to place on which axes.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualizing-with-plotnine-4" class="slide level2">
<h2>Visualizing with plotnine</h2>
<pre><code class="language-python">(billie
 &gt;&gt; ggplot(aes("energy", "valence"))
  <mark>+ geom_point()</mark>
  + labs(title = "Billie Eilish hit track features")
)
</code></pre>
<aside class="notes">
<p>The third step is specifying the type of graph you’re creating. You do that by adding a layer to the graph: use a plus after the ggplot, and then geom underscore point.</p>
<p>The “geom” means you’re adding a type of geometric object to the graph, the “point” indicates it’s a scatter plot, where each observation corresponds to one point.</p>
<p>Together, these three parts of the code–the data, the aesthetic mapping, and the layer–construct the scatter plot you see here.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="lets-practice-5" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<aside class="notes">
<p>Scroll down to get started with practice!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-plotnine-geoms" class="title-slide slide level1 custom-title center">
<h1>Using plotnine geoms</h1>

</section>

<section id="using-plotnine-geoms-1" class="title-slide slide level1 center">
<h1>Using plotnine geoms</h1>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>(billie</span>
<span id="cb38-2"><a href="#cb38-2"></a> <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="op">+</span> geom_point()</span>
<span id="cb38-4"><a href="#cb38-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-43-output-1.png" class="r-stretch"><aside class="notes">
<p>In the previous lesson, you created this scatter plot comparing the energy of each song to its valence.</p>
<p>This plot communicates some interesting information: we can see that higher income countries tend to have higher life expectancy.</p>
<p>One problem with this plot, however, is that it’s impossible to tell which song is which. Adding labels to the point will let us identify songs in the plot.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-geom_label" class="title-slide slide level1 center">
<h1>Using geom_label</h1>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>(billie</span>
<span id="cb39-2"><a href="#cb39-2"></a> <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, label <span class="op">=</span> <span class="st">"track_name"</span>))</span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="op">+</span> geom_label()</span>
<span id="cb39-4"><a href="#cb39-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-44-output-1.png" class="r-stretch"><aside class="notes">
<p>The first option for plotting text is using <code>geom_label()</code>. This plots the text with a filled in box around it.</p>
<p>Unlike scanning a DataFrame of results, it’s easy to see pick out songs across a range of valence and energy.</p>
<p>For example, relative to other songs:</p>
<ul>
<li>“i love you” is low valence and low energy</li>
<li>“bad guy” is high valence and high energy</li>
<li>“bellyache” is extremely high energe and a moderate amount of valence</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-geom_text" class="title-slide slide level1 center">
<h1>Using geom_text</h1>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a>(billie</span>
<span id="cb40-2"><a href="#cb40-2"></a> <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, label <span class="op">=</span> <span class="st">"track_name"</span>))</span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="op">+</span> geom_text()</span>
<span id="cb40-4"><a href="#cb40-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-45-output-1.png" class="r-stretch"><aside class="notes">
<p>A second option for plotting text is with <code>geom_text()</code>. This plots text by itself, without a background box.</p>
<p>Notice the words in front don’t cover other words as much, but it can also be harder to read them.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="combining-geoms" class="title-slide slide level1 center">
<h1>Combining geoms</h1>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a>(billie</span>
<span id="cb41-2"><a href="#cb41-2"></a> <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, label <span class="op">=</span> <span class="st">"track_name"</span>))</span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="op">+</span> geom_text(nudge_y <span class="op">=</span> <span class="fl">.1</span>)</span>
<span id="cb41-4"><a href="#cb41-4"></a>  <span class="op">+</span> geom_point()</span>
<span id="cb41-5"><a href="#cb41-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-46-output-1.png" class="r-stretch"><aside class="notes">
<p>When you plot multiple geoms–like in this plot–ggplot goes line-by-line, from top to bottom.</p>
<p>For example, in the code here, it first puts down the words from <code>geom_text()</code>, then the points from <code>geom_point()</code>.</p>
<p>Notice also that <code>geom_text()</code> has an option passed to it, <code>nudge_y = ,1</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="more-on-geom-options" class="title-slide slide level1 center">
<h1>More on geom options</h1>

<img data-src="./plotnine-geom-doc.png" class="r-stretch"><aside class="notes">
<p>In general, there are many arguments you can pass to geoms, and different geoms can take different arguments.</p>
<p>The easiest way to understand what arguments geoms can take, and what they do, is to look at the plotnine documentation website.</p>
<p>Here are two useful parts of the docs:</p>
<ul>
<li><a href="https://plotnine.readthedocs.io/en/stable/api.html">list of available geoms</a></li>
<li><a href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_text.html#plotnine.geoms.geom_text">help document on geom_text</a></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-6" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<ul>
<li><a href="https://plotnine.readthedocs.io/">plotnine docs</a></li>
<li><a href="https://plotnine.readthedocs.io/en/stable/generated/plotnine.geoms.geom_text.html">geom_text() API page</a></li>
</ul>
<aside class="notes">
<p>In the exercises, you’ll practice creating other scatter plots to compare variables across countries, and in the rest of this chapter you’ll learn more ways to communicate information in a graph.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="using-plotnine-aesthetics" class="title-slide slide level1 custom-title center">
<h1>Using plotnine Aesthetics</h1>
<aside class="notes">
<p>In this lesson, you’ll use plotnine aesthetics to set more than just the position of points on a plot, but other features too–such as size and color.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="scatterplots" class="title-slide slide level1 center">
<h1>Scatterplots</h1>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>billie <span class="op">=</span> <span class="bu">filter</span>(track_features, _.artist <span class="op">==</span> <span class="st">"Billie Eilish"</span>)</span>
<span id="cb42-2"><a href="#cb42-2"></a></span>
<span id="cb42-3"><a href="#cb42-3"></a>(billie</span>
<span id="cb42-4"><a href="#cb42-4"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>))</span>
<span id="cb42-5"><a href="#cb42-5"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb42-6"><a href="#cb42-6"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-48-output-1.png" class="r-stretch"><aside class="notes">
<p>You’ve learned how to create a scatter plot to compare two variables within your data using two visual aesthetics: energy x-axis, and valence on the y-axis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="additional-variables" class="title-slide slide level1 center">
<h1>Additional variables</h1>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a>billie</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">album</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">energy</th>
<th data-quarto-table-cell-role="th">valence</th>
<th data-quarto-table-cell-role="th">danceability</th>
<th data-quarto-table-cell-role="th">speechiness</th>
<th data-quarto-table-cell-role="th">acousticness</th>
<th data-quarto-table-cell-role="th">popularity</th>
<th data-quarto-table-cell-role="th">duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1273</td>
<td>Billie Eilish</td>
<td>dont smile at me (Expanded Edition)</td>
<td>my boy</td>
<td>0.3940</td>
<td>0.3240</td>
<td>0.692</td>
<td>0.2070</td>
<td>0.472</td>
<td>44</td>
<td>170.852</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2899</td>
<td>Billie Eilish</td>
<td>WHEN WE ALL FALL ASLEEP, WHERE DO WE GO?</td>
<td>listen before i go</td>
<td>0.0561</td>
<td>0.0820</td>
<td>0.319</td>
<td>0.0450</td>
<td>0.935</td>
<td>79</td>
<td>242.652</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2950</td>
<td>Billie Eilish</td>
<td>lovely (with Khalid)</td>
<td>lovely (with Khalid)</td>
<td>0.2960</td>
<td>0.1200</td>
<td>0.351</td>
<td>0.0333</td>
<td>0.934</td>
<td>89</td>
<td>200.186</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24857</td>
<td>Billie Eilish</td>
<td>WHEN WE ALL FALL ASLEEP, WHERE DO WE GO?</td>
<td>ilomilo</td>
<td>0.4230</td>
<td>0.5720</td>
<td>0.855</td>
<td>0.0585</td>
<td>0.724</td>
<td>79</td>
<td>156.371</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24997</td>
<td>Billie Eilish</td>
<td>WHEN I WAS OLDER (Music Inspired By The Film ROMA)</td>
<td>WHEN I WAS OLDER - Music Inspired By The Film ROMA</td>
<td>0.3320</td>
<td>0.0628</td>
<td>0.696</td>
<td>0.0425</td>
<td>0.853</td>
<td>71</td>
<td>270.520</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25147</td>
<td>Billie Eilish</td>
<td>come out and play</td>
<td>come out and play</td>
<td>0.3210</td>
<td>0.1770</td>
<td>0.640</td>
<td>0.0931</td>
<td>0.693</td>
<td>74</td>
<td>210.376</td>
</tr>
</tbody>
</table>

<p>27 rows × 10 columns</p>
</div>
</div>
<aside class="notes">
<p>But these aren’t the only variables in the <code>track_features</code> dataset: for example, you also have acousticness and popularity. You may want to examine relationships among all these variables in the same plot.</p>
<p>You already used the x-axis to represent energy and the y-axis to valence Now you’ll learn to add two more aesthetics–color and size–to communicate even more information in your scatter plot.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-color-aesthetic" class="title-slide slide level1 center">
<h1>The color aesthetic</h1>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a>(billie</span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, color <span class="op">=</span> <span class="st">"acousticness"</span>))</span>
<span id="cb44-3"><a href="#cb44-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb44-4"><a href="#cb44-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-50-output-1.png" class="r-stretch"><aside class="notes">
<p>The scatterplot shows that songs with higher energy, tend to have higher valence. Another variable that might be related to energy is <code>acousticness</code>.</p>
<p>You can explore this relationship by setting the color of your points, like you see here. To use this aesthetic, you add color equals acousticness inside the aes, next to x equals energy and y equals valence.</p>
<p>Notice that ggplot2 automatically adds a legend to the plot, indicating which color represents which acousticness.</p>
<p>This communicates that lower energy tracks (toward the left of the plot) tend to be more acoustic. Note that brighter colors indicate more acoustic tracks.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-size-aesthetic" class="title-slide slide level1 center">
<h1>The size aesthetic</h1>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a>(billie</span>
<span id="cb45-2"><a href="#cb45-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, color <span class="op">=</span> <span class="st">"acousticness"</span>, size <span class="op">=</span> <span class="st">"popularity"</span>))</span>
<span id="cb45-3"><a href="#cb45-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb45-4"><a href="#cb45-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-51-output-1.png" class="r-stretch"><aside class="notes">
<p>Another variable you may want to include in the graph is population, represented by the pop variable in the dataset.</p>
<p>One way to represent it is with the size of the points in the scatterplot, with higher popularity songs getting larger points.</p>
<p>Just like x, y, and color, you add size = “popularity” within the aes parentheses.</p>
<details>
<p>Note that to keep the length of each of the code lines reasonable, we put the size aesthetic on a second line, but this doesn’t make any difference, and you don’t have to do that in the exercises. You’ve now learned to use four aesthetics in a plot: x, y, color, and size: to communicate information about four variables in your dataset.</p>
</details>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="aesthetics-with-multiple-geoms" class="title-slide slide level1 center">
<h1>Aesthetics with multiple geoms</h1>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1"></a>(billie</span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"energy"</span>, <span class="st">"valence"</span>, </span>
<span id="cb46-3"><a href="#cb46-3"></a>                color <span class="op">=</span> <span class="st">"acousticness"</span>, size <span class="op">=</span> <span class="st">"popularity"</span>,</span>
<span id="cb46-4"><a href="#cb46-4"></a>                label <span class="op">=</span> <span class="st">"track_name"</span>))</span>
<span id="cb46-5"><a href="#cb46-5"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb46-6"><a href="#cb46-6"></a>   <span class="op">+</span> geom_text(nudge_y <span class="op">=</span> <span class="fl">.1</span>)</span>
<span id="cb46-7"><a href="#cb46-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-52-output-1.png" class="r-stretch"><aside class="notes">
<p>Notice that in this plot, the aesthetics set effect both the points and the text.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-7" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<aside class="notes">
<p>In the exercises, you’ll learn to mix and match aesthetics and variables to further explore the track features.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<ul>
<li>filter artist, get characteristics</li>
<li>try different combinations of characteristics–which ones seem most related?</li>
<li>diagnose error (unquoted ggplot)</li>
<li>diagnose error (verb without _)</li>
<li>plot with aesthetics</li>
<li>plot text instead</li>
<li>labs?</li>
</ul>
</section>

<section id="faceting" class="title-slide slide level1 custom-title center">
<h1>Faceting</h1>
<aside class="notes">
<p>You’ve learned to use color in your scatterplots.</p>
<p>Now you’ll learn another way to explore your data. plotnine lets you divide your plot into subplots to get one smaller graph for each level of a variable.</p>
<p>This is called faceting, and it’s another powerful way to communicate relationships within your data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="faceting-1" class="title-slide slide level1 center">
<h1>Faceting</h1>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1"></a>asia_top200 <span class="op">=</span> (</span>
<span id="cb47-2"><a href="#cb47-2"></a>  music_top200</span>
<span id="cb47-3"><a href="#cb47-3"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.continent <span class="op">==</span> <span class="st">"Asia"</span>)</span>
<span id="cb47-4"><a href="#cb47-4"></a>)</span>
<span id="cb47-5"><a href="#cb47-5"></a>asia_top200</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4600</td>
<td>Hong Kong</td>
<td>1</td>
<td>WANNABE</td>
<td>ITZY</td>
<td>112648</td>
<td>191.242</td>
<td>Asia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4601</td>
<td>Hong Kong</td>
<td>2</td>
<td>Intentions (feat. Quavo)</td>
<td>Justin Bieber</td>
<td>104467</td>
<td>212.867</td>
<td>Asia</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4602</td>
<td>Hong Kong</td>
<td>3</td>
<td>Señorita</td>
<td>Shawn Mendes</td>
<td>84196</td>
<td>190.960</td>
<td>Asia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12197</td>
<td>Viet Nam</td>
<td>198</td>
<td>Đưa Nhau Đi Trốn (Chill Version)</td>
<td>Đen</td>
<td>20750</td>
<td>241.959</td>
<td>Asia</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12198</td>
<td>Viet Nam</td>
<td>199</td>
<td>Hôm Nay Tôi Buồn</td>
<td>Phùng Khánh Linh</td>
<td>20580</td>
<td>275.000</td>
<td>Asia</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12199</td>
<td>Viet Nam</td>
<td>200</td>
<td>Kick It</td>
<td>NCT 127</td>
<td>20495</td>
<td>233.013</td>
<td>Asia</td>
</tr>
</tbody>
</table>

<p>2600 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>For this example, we’ll use Spotify top 200 track data for countries in Asia.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="faceting-2" class="title-slide slide level1 center">
<h1>Faceting</h1>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>(asia_top200</span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"streams"</span>, color <span class="op">=</span> <span class="st">"country"</span>))</span>
<span id="cb48-3"><a href="#cb48-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb48-4"><a href="#cb48-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-55-output-1.png" class="r-stretch"><aside class="notes">
<p>This plot shows the number of streams for each top 200 track in Asian countries.</p>
<p>There are so many countries that the plot hits two issues:</p>
<ol type="1">
<li>it has to use many different colors.</li>
<li>many points are on top of each other.</li>
</ol>
<p>A facetted plot could help here, by giving each country its own small panel.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="faceting-3" class="title-slide slide level1 center">
<h1>Faceting</h1>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a>(asia_top200</span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"streams"</span>, color <span class="op">=</span> <span class="st">"country"</span>))</span>
<span id="cb49-3"><a href="#cb49-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb49-4"><a href="#cb49-4"></a>   <span class="op">+</span> facet_wrap(<span class="st">'~country'</span>)</span>
<span id="cb49-5"><a href="#cb49-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-56-output-1.png" class="r-stretch"><aside class="notes">
<p>You facet a plot by adding another option, with a +, to the end of your code, after geom_point.</p>
<p>You add facet underscore wrap, then “tilde country” within the parentheses.</p>
<p>In R, the tilde symbol typically means “by”, meaning that we’re splitting the plot by country, and you can usually find it on the upper left of your keyboard. This tells ggplot2 to divide the data into subplots based on the country variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-8" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<aside class="notes">
<p>Scroll down to get started with practice!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="summarizing-data" class="title-slide slide level1 custom-title center">
<h1>Summarizing data</h1>
<aside class="notes">
<p>In this chapter, you’ll return to the topic of data transformation with siuba to learn more ways to explore your data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="data-analysis-2" class="title-slide slide level1 center">
<h1>Data analysis</h1>

<img data-src="model-workflow.png" class="r-stretch"><aside class="notes">
<p>Analyses will usually involve a cycle between these steps of data transformation and visualization, as well as additional components of the data science workflow, like modeling (that this course won’t focus on).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="extracting-data" class="title-slide slide level1 center">
<h1>Extracting data</h1>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1"></a>(music_top200</span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Japan"</span>, _.position <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb50-3"><a href="#cb50-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">track_name</th>
<th data-quarto-table-cell-role="th">artist</th>
<th data-quarto-table-cell-role="th">streams</th>
<th data-quarto-table-cell-role="th">duration</th>
<th data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">6400</td>
<td>Japan</td>
<td>1</td>
<td>I LOVE...</td>
<td>Official HIGE DANdism</td>
<td>1591844</td>
<td>282.027</td>
<td>Asia</td>
</tr>
</tbody>
</table>

<p>1 rows × 7 columns</p>
</div>
</div>
<aside class="notes">
<p>You’ve learned to use the filter verb to pull out individual observations, such as the track in the first position for Japan.</p>
<p>Notice that the track’s duration is about 280 seconds. Is this is shorter or longer than the average track.</p>
<p>You’ll learn to answer this question by summarizing many observations into a single data point.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="the-summarize-verb" class="title-slide slide level1 center">
<h1>The summarize verb</h1>

<img data-src="./model-summarize.png" class="r-stretch"><div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>(music_top200</span>
<span id="cb51-2"><a href="#cb51-2"></a>  <span class="op">&gt;&gt;</span> summarize(avg_duration <span class="op">=</span> _.duration.mean())</span>
<span id="cb51-3"><a href="#cb51-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>205.990073</td>
</tr>
</tbody>
</table>

<p>1 rows × 1 columns</p>
</div>
</div>
<aside class="notes">
<p>You might want to know if the 280 seconds we saw is longer than the average track across all countries.</p>
<p>You would do this with the summarize verb. Notice that summarize collapses the entire table down into one row.</p>
<p>In the output, we see the answer to our question: mean (or average) duration was around 205 seconds.</p>
<p><strong>(Click down for a breakdown of the code)</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-summarize-verb-1" class="slide level2">
<h2>The summarize verb</h2>

<img data-src="./model-summarize.png" class="r-stretch"><pre><code class="language-python">(music_top200
  &gt;&gt; summarize(<mark>avg_duration =</mark> _.duration.mean())
)</code></pre>
<div class="cell" data-tags="[&quot;hide-input&quot;]" data-execution_count="59">
<div class="cell-output cell-output-display" data-execution_count="58">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>205.990073</td>
</tr>
</tbody>
</table>

<p>1 rows × 1 columns</p>
</div>
</div>
<aside class="notes">
<p>Take your <code>music_top200</code> data, pipe it into summarize.</p>
<p>Then, specify that you’re creating a summary column called avg_duration.</p>
<p>Notice that the highlighted code is similar to when created a new column with the mutate verb.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-summarize-verb-2" class="slide level2">
<h2>The summarize verb</h2>

<img data-src="./model-summarize.png" class="r-stretch"><pre><code class="language-python">(music_top200
  &gt;&gt; summarize(avg_duration = _.duration<mark>.mean()</mark>)
)</code></pre>
<div class="cell" data-tags="[&quot;hide-input&quot;]" data-execution_count="60">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a>(music_top200</span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="op">&gt;&gt;</span> summarize(avg_duration <span class="op">=</span> _.duration.mean())</span>
<span id="cb52-3"><a href="#cb52-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>205.990073</td>
</tr>
</tbody>
</table>

<p>1 rows × 1 columns</p>
</div>
</div>
<aside class="notes">
<p>The “duration dot mean, followed by open and close parentheses” is worth examining.</p>
<p>This is calling the <strong>method</strong> mean on the variable duration. The mean method calculates the average of a set of values.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="summarizing-one-country" class="title-slide slide level1 center">
<h1>Summarizing one country</h1>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a>(music_top200</span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Japan"</span>)</span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="op">&gt;&gt;</span> summarize(avg_duration <span class="op">=</span> _.duration.mean())</span>
<span id="cb53-4"><a href="#cb53-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>250.53499</td>
</tr>
</tbody>
</table>

<p>1 rows × 1 columns</p>
</div>
</div>
<aside class="notes">
<p>If you think about it, it doesn’t really make sense to summarize across all countries. It may make more sense to compare our track to averages in the same country: Japan.</p>
<p>To answer this, you can combine the summarize verb with filter: filter your data for a particular country first, then summarize the result. This shows you that the average track duration in the Japan top 200 chart was about 250 seconds.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="summarizing-into-multiple-columns" class="title-slide slide level1 center">
<h1>Summarizing into multiple columns</h1>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1"></a>(music_top200</span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Japan"</span>)</span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="op">&gt;&gt;</span> summarize(</span>
<span id="cb54-4"><a href="#cb54-4"></a>      avg_duration <span class="op">=</span> _.duration.mean(),</span>
<span id="cb54-5"><a href="#cb54-5"></a>      ttl_streams <span class="op">=</span> _.streams.<span class="bu">sum</span>()</span>
<span id="cb54-6"><a href="#cb54-6"></a>  )</span>
<span id="cb54-7"><a href="#cb54-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
<th data-quarto-table-cell-role="th">ttl_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>250.53499</td>
<td>48942067</td>
</tr>
</tbody>
</table>

<p>1 rows × 2 columns</p>
</div>
</div>
<aside class="notes">
<p>You can create multiple summaries at once with the summarize verb.</p>
<p>For example, suppose that along with finding the average track duration in Japan, you want to find their chart’s total streams.</p>
<p>To do that, add a comma after the mean of the duration. Then, specify another column you’re creating.</p>
<p>You could give it a useful name like ttl_streams, and say that it’s equal to the sum–that’s another built-in function–of the pop variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="methods-for-summarizing" class="title-slide slide level1 center">
<h1>Methods for summarizing</h1>
<p>E.g. <code>_.some_column.mean()</code></p>
<ul>
<li><code>.mean()</code></li>
<li><code>.sum()</code></li>
<li><code>.median()</code></li>
<li><code>.min()</code></li>
<li><code>.max()</code></li>
</ul>
<aside class="notes">
<p>The mean and sum are just two methods you could use to summarize a variable within a dataset.</p>
<p>Another example is median: the median represents the point in a set of numbers where half the numbers are above that point and half of the numbers are below.</p>
<p>Two others are min, for minimum, and max, for maximum.</p>
<p>In the exercises, you’ll use several of these functions to answer questions about the <code>music_top200</code> dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-9" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>

</section>

<section id="the-group_by-verb" class="title-slide slide level1 center">
<h1>The group_by verb</h1>
<aside class="notes">
<p>In the last lesson, you used the summarize verb to calculate an average either,</p>
<ul>
<li>across all countries (the entire dataset)</li>
<li>within a particular country (filtered data)</li>
</ul>
<p>In this lesson you’ll learn the group_by verb, which opens up a new option for calculating an average:</p>
<ul>
<li>within each country</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-group_by-verb-1" class="title-slide slide level1 center">
<h1>The group_by verb</h1>

<img data-src="./model_group_by.png" class="r-stretch"><aside class="notes">
<p>You use group_by to define groupings of data (blue and green chunks in diagram).</p>
<p>Then, you would follow it with summarize to convert those groups to a single value (like a mean).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="the-summarize-verb-3" class="title-slide slide level1 center">
<h1>The summarize verb</h1>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a>(music_top200</span>
<span id="cb55-2"><a href="#cb55-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.country <span class="op">==</span> <span class="st">"Japan"</span>)</span>
<span id="cb55-3"><a href="#cb55-3"></a>  <span class="op">&gt;&gt;</span> summarize(avg_duration <span class="op">=</span> _.duration.mean()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>250.53499</td>
</tr>
</tbody>
</table>

<p>1 rows × 1 columns</p>
</div>
</div>
<aside class="notes">
<p>For example, here you’re finding the average track duration in Japan.</p>
<p>What if we weren’t interested just in the average duration for Japan, but for each country in the dataset?</p>
<p>You could rerun this code and change the country each time, but that’s very tedious.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="summarizing-by-country" class="title-slide slide level1 center">
<h1>Summarizing by country</h1>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1"></a>(music_top200</span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="op">&gt;&gt;</span> group_by(_.country)</span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="op">&gt;&gt;</span> summarize(avg_duration <span class="op">=</span> _.duration.mean())</span>
<span id="cb56-4"><a href="#cb56-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">avg_duration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Argentina</td>
<td>212.847855</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Australia</td>
<td>204.795300</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Austria</td>
<td>184.894870</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">59</td>
<td>United States</td>
<td>190.827500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">60</td>
<td>Uruguay</td>
<td>210.796985</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">61</td>
<td>Viet Nam</td>
<td>217.222830</td>
</tr>
</tbody>
</table>

<p>62 rows × 2 columns</p>
</div>
</div>
<aside class="notes">
<p>Instead, you can use the group_by verb, which tells siuba to summarize within groups instead of summarizing the entire dataset. Notice that this replaces the filter country equals Japan with group_by country.</p>
<p><code>group_by(_.country)</code> tells the summarize step that it should perform the summary within each country: within Argentina, then within Australia, and so on through Viet Nam, then combine the results.</p>
<p>Instead of getting one row overall, you now get <strong>one row for each country</strong>. There’s now a year variable along with the new avg_duration variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="summarizing-by-continent-and-position" class="title-slide slide level1 center">
<h1>Summarizing by continent and position</h1>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a>(music_top200</span>
<span id="cb57-2"><a href="#cb57-2"></a>  <span class="op">&gt;&gt;</span> group_by(_.continent, _.position)</span>
<span id="cb57-3"><a href="#cb57-3"></a>  <span class="op">&gt;&gt;</span> summarize(</span>
<span id="cb57-4"><a href="#cb57-4"></a>      min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>(),</span>
<span id="cb57-5"><a href="#cb57-5"></a>      max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>()</span>
<span id="cb57-6"><a href="#cb57-6"></a>  )</span>
<span id="cb57-7"><a href="#cb57-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">min_streams</th>
<th data-quarto-table-cell-role="th">max_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Africa</td>
<td>1</td>
<td>94422</td>
<td>94422</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Africa</td>
<td>2</td>
<td>74689</td>
<td>74689</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Africa</td>
<td>3</td>
<td>67552</td>
<td>67552</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">997</td>
<td>Oceania</td>
<td>198</td>
<td>44570</td>
<td>225951</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">998</td>
<td>Oceania</td>
<td>199</td>
<td>44364</td>
<td>225492</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">999</td>
<td>Oceania</td>
<td>200</td>
<td>44291</td>
<td>225179</td>
</tr>
</tbody>
</table>

<p>1000 rows × 4 columns</p>
</div>
</div>
<aside class="notes">
<p>You can also group by multiple variables.</p>
<p>Suppose you’re interested calculating min and max streams within each continent, and each position.</p>
<p>Now the output has one row for each combination of a continent and position.</p>
<p><strong>(Click down to see what the steps leading to this code might look like)</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summarizing-by-continent-and-position-1" class="slide level2">
<h2>Summarizing by continent and position</h2>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1"></a>(music_top200</span>
<span id="cb58-2"><a href="#cb58-2"></a></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="op">&gt;&gt;</span> summarize(</span>
<span id="cb58-4"><a href="#cb58-4"></a>      min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>(),</span>
<span id="cb58-5"><a href="#cb58-5"></a>      max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>()</span>
<span id="cb58-6"><a href="#cb58-6"></a>  )</span>
<span id="cb58-7"><a href="#cb58-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">min_streams</th>
<th data-quarto-table-cell-role="th">max_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1470</td>
<td>12987027</td>
</tr>
</tbody>
</table>

<p>1 rows × 2 columns</p>
</div>
</div>
<aside class="notes">
<p>You might start by summarizing min and max streams across all the data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summarizing-by-continent-and-position-2" class="slide level2">
<h2>Summarizing by continent and position</h2>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a>(music_top200</span>
<span id="cb59-2"><a href="#cb59-2"></a>  <span class="op">&gt;&gt;</span> <span class="bu">filter</span>(_.continent <span class="op">==</span> <span class="st">"Oceania"</span>, _.position <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb59-3"><a href="#cb59-3"></a>  <span class="op">&gt;&gt;</span> summarize(</span>
<span id="cb59-4"><a href="#cb59-4"></a>      min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>(),</span>
<span id="cb59-5"><a href="#cb59-5"></a>      max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>()</span>
<span id="cb59-6"><a href="#cb59-6"></a>  )</span>
<span id="cb59-7"><a href="#cb59-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">min_streams</th>
<th data-quarto-table-cell-role="th">max_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>321272</td>
<td>1757343</td>
</tr>
</tbody>
</table>

<p>1 rows × 2 columns</p>
</div>
</div>
<aside class="notes">
<p>Then, you might add a filter, so your summarize is over one specific grouping (position 1 tracks in Oceania).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summarizing-by-continent-and-position-3" class="slide level2">
<h2>Summarizing by continent and position</h2>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a>(music_top200</span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="op">&gt;&gt;</span> group_by(_.continent, _.position)</span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="op">&gt;&gt;</span> summarize(</span>
<span id="cb60-4"><a href="#cb60-4"></a>      min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>(),</span>
<span id="cb60-5"><a href="#cb60-5"></a>      max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>()</span>
<span id="cb60-6"><a href="#cb60-6"></a>  )</span>
<span id="cb60-7"><a href="#cb60-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">min_streams</th>
<th data-quarto-table-cell-role="th">max_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Africa</td>
<td>1</td>
<td>94422</td>
<td>94422</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Africa</td>
<td>2</td>
<td>74689</td>
<td>74689</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Africa</td>
<td>3</td>
<td>67552</td>
<td>67552</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">997</td>
<td>Oceania</td>
<td>198</td>
<td>44570</td>
<td>225951</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">998</td>
<td>Oceania</td>
<td>199</td>
<td>44364</td>
<td>225492</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">999</td>
<td>Oceania</td>
<td>200</td>
<td>44291</td>
<td>225179</td>
</tr>
</tbody>
</table>

<p>1000 rows × 4 columns</p>
</div>
</div>
<aside class="notes">
<p>Finally, you might replace the filter with a group_by.</p>
<p>Note that you might save this result as a variable and use it in a new pipe or visualization. For example, the new pipe might filter to keep where position is 1, so you can inspect min and max streams for the top tracks across continents.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="lets-practice-10" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>

</section>

<section id="visualizing-summarized-data" class="title-slide slide level1 custom-title center">
<h1>Visualizing summarized data</h1>
<aside class="notes">
<p>In this chapter you learned to use the group by and summarize verbs to summarize the music_top200 data by year, by continent, or by both.</p>
<p>Now you’ll learn how to turn those summaries into informative visualizations, by returning to the plotnine package from Chapter 2.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="when-visualizing-raw-data-doesnt-work" class="title-slide slide level1 center">
<h1>When visualizing raw data doesn’t work</h1>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1"></a>(music_top200</span>
<span id="cb61-2"><a href="#cb61-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"streams"</span>, color <span class="op">=</span> <span class="st">"country"</span>))</span>
<span id="cb61-3"><a href="#cb61-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb61-4"><a href="#cb61-4"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-72-output-1.png" class="r-stretch"><aside class="notes">
<p>Suppose we want to look at how many streams countries have. We could make a scatterplot showing each track in each country, like in the plot on the slide.</p>
<p>However, there are so many countries that it is hard to read, and half the plot is the legend that shows what color each country is.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="calculating-min-and-max-streams" class="title-slide slide level1 center">
<h1>Calculating min and max streams</h1>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a>by_position <span class="op">=</span> (</span>
<span id="cb62-2"><a href="#cb62-2"></a>  music_top200</span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="op">&gt;&gt;</span> group_by(_.position)</span>
<span id="cb62-4"><a href="#cb62-4"></a>  <span class="op">&gt;&gt;</span> summarize(max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>(),</span>
<span id="cb62-5"><a href="#cb62-5"></a>               min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>())</span>
<span id="cb62-6"><a href="#cb62-6"></a>)</span>
<span id="cb62-7"><a href="#cb62-7"></a>by_position</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">max_streams</th>
<th data-quarto-table-cell-role="th">min_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>12987027</td>
<td>13604</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>9163134</td>
<td>10801</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>8043475</td>
<td>9510</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">197</td>
<td>198</td>
<td>1606234</td>
<td>1472</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">198</td>
<td>199</td>
<td>1606153</td>
<td>1470</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">199</td>
<td>200</td>
<td>1597824</td>
<td>1470</td>
</tr>
</tbody>
</table>

<p>200 rows × 3 columns</p>
</div>
</div>
<aside class="notes">
<p>Rather than plotting the raw data, we can plot a summary.</p>
<p>For example, previously we summarized data by continent and position, to find the max and min streams.</p>
<p>Let’s do that again, but instead of viewing the summarized data as a table, let’s save it as an object called by_continent_position, so you can visualize the data using plotnine.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="plotting" class="title-slide slide level1 center">
<h1>Plotting</h1>
<div class="sourceCode" id="cb63"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1"></a>(by_position</span>
<span id="cb63-2"><a href="#cb63-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"max_streams"</span>))</span>
<span id="cb63-3"><a href="#cb63-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb63-4"><a href="#cb63-4"></a>   <span class="op">+</span> labs(title <span class="op">=</span> <span class="st">"Top 200 hits - max streams overall"</span>)</span>
<span id="cb63-5"><a href="#cb63-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>You would construct the graph with the three steps of plotnine:</p>
<ul>
<li>The data, which is by_year.</li>
<li>The aesthetics, which puts year on the x-axis and total population on the y-axis.</li>
<li>The type of graph, which in this case is a scatter plot, represented by geom_point.</li>
</ul>
<p>Notice that the steps are the same as when you were graphing countries in a scatter plot, even though it’s a new dataset.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="plotting-result" class="title-slide slide level1 center">
<h1>Plotting (result)</h1>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1"></a>(by_position</span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"max_streams"</span>))</span>
<span id="cb64-3"><a href="#cb64-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb64-4"><a href="#cb64-4"></a>   <span class="op">+</span> labs(title <span class="op">=</span> <span class="st">"Top 200 hits - max streams overall"</span>)</span>
<span id="cb64-5"><a href="#cb64-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-74-output-1.png" class="r-stretch"><aside class="notes">
<p>The resulting graph of max streams by position, which is much easier to read than the previous plot with all the raw data.</p>
<p>The top track is (by definition) the most streamed, with about 100 million streams!</p>
<p>You might notice that the graph is a little misleading because it doesn’t include zero: It’s hard to get a a sense of how many streams the last position track had, since it is at the bottom of the graph.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="starting-y-axis-at-0" class="title-slide slide level1 center">
<h1>Starting y-axis at 0</h1>
<pre><code class="language-python">(by_position
  &gt;&gt; ggplot(aes("position", "max_streams"))
   + geom_point()
   <mark>+ expand_limits(y = 0)</mark>
   + labs(title = "Top 200 hits - max streams overall"))</code></pre>

<img data-src="all-slides_files/figure-revealjs/cell-75-output-1.png" class="r-stretch"><aside class="notes">
<p>This is a good time to introduce another graphing option. By adding “expand underscore limits y = 0” to the end of the ggplot call, you can specify that you want the y-axis to start at zero.</p>
<p>Notice that you added it to the end just like you would with facet_wrap.</p>
<p>Now the graph makes it clearer that the top position track has over three times as many streams, as the lowest position one.</p>
<p>You could have created other graphs of summarized data, such as a graph of the average streams rather than max, by changing the y aesthetic.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="calculating-min-and-max-streams-1" class="title-slide slide level1 center">
<h1>Calculating min and max streams</h1>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1"></a>by_continent_position <span class="op">=</span> (</span>
<span id="cb65-2"><a href="#cb65-2"></a>  music_top200</span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="op">&gt;&gt;</span> group_by(_.continent, _.position)</span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="op">&gt;&gt;</span> summarize(max_streams <span class="op">=</span> _.streams.<span class="bu">max</span>(),</span>
<span id="cb65-5"><a href="#cb65-5"></a>               min_streams <span class="op">=</span> _.streams.<span class="bu">min</span>())</span>
<span id="cb65-6"><a href="#cb65-6"></a>)</span>
<span id="cb65-7"><a href="#cb65-7"></a>by_continent_position</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">continent</th>
<th data-quarto-table-cell-role="th">position</th>
<th data-quarto-table-cell-role="th">max_streams</th>
<th data-quarto-table-cell-role="th">min_streams</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Africa</td>
<td>1</td>
<td>94422</td>
<td>94422</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Africa</td>
<td>2</td>
<td>74689</td>
<td>74689</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Africa</td>
<td>3</td>
<td>67552</td>
<td>67552</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">997</td>
<td>Oceania</td>
<td>198</td>
<td>225951</td>
<td>44570</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">998</td>
<td>Oceania</td>
<td>199</td>
<td>225492</td>
<td>44364</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">999</td>
<td>Oceania</td>
<td>200</td>
<td>225179</td>
<td>44291</td>
</tr>
</tbody>
</table>

<p>1000 rows × 4 columns</p>
</div>
</div>
<aside class="notes">
<p>So far you’ve been graphing the by-position summarized data. But you have also learned to summarize after grouping by both position and continent, to see how much countries are streaming top tracks on different continents continents.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="visualize" class="title-slide slide level1 center">
<h1>Visualize</h1>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1"></a>(by_continent_position</span>
<span id="cb66-2"><a href="#cb66-2"></a>  <span class="op">&gt;&gt;</span> ggplot(aes(<span class="st">"position"</span>, <span class="st">"max_streams"</span>, color <span class="op">=</span> <span class="st">"continent"</span>))</span>
<span id="cb66-3"><a href="#cb66-3"></a>   <span class="op">+</span> geom_point()</span>
<span id="cb66-4"><a href="#cb66-4"></a>   <span class="op">+</span> expand_limits(y <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb66-5"><a href="#cb66-5"></a>   <span class="op">+</span> labs(title <span class="op">=</span> <span class="st">"Top 200 hits - max streams overall"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="all-slides_files/figure-revealjs/cell-77-output-1.png" class="r-stretch"><aside class="notes">
<p>Since you now have data over position within each continent, you need a way to separate it in a visualization.</p>
<p>To do that you can use the color aesthetic you learned about in chapter two.</p>
<p>By setting color equals continent, you can show five separate trends on the same graph.</p>
<p>This lets us see that a country in the Americas has a hit tracks with a large number of streams, while there aren’t any countries in Africa doing a lot of streaming spotify hits (for more on companies competing to stream in Africa, see <a href="https://weetracker.com/2020/05/13/music-streaming-africa/">this article</a>).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="lets-practice-11" class="title-slide slide level1 center">
<h1>Let’s practice!</h1>
<aside class="notes">
<p>You’ll often combine siuba verbs and plotnine visualizations as part of an exploratory analysis, so it’s important to get into the habit of visualizing summarized or processed data.</p>
<p>Scroll down to investigate the music data with filter.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="../site_libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'multiplex': {"secret":null,"id":"732f287dd125d451","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h.v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 650,

        height: 600,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>